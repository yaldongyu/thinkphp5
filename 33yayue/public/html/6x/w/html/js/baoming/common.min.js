function page_common(t, e) {
	headerAnimate();
	new topHidden, new search_prompt({
		ctn: ".search-ctn",
		btn: ".search-btn",
		href: t
	});
	openLink(e), rightNav()
}

function rightNav() {
	var t = $(".floating-box");
	if (t.length <= 0) return !1;
	var e = $(window).scrollTop();
	e >= 600 && $(".floating-box").fadeIn(), createQrcode(), $(window).on("scroll", function () {
		var t = $(this).scrollTop();
		t >= 600 ? $(".floating-box").fadeIn() : $(".floating-box").fadeOut()
	}), $(".floating-box .go-top").on("click", function () {
		$("html,body").animate({
			scrollTop: "0px"
		})
	}), $(window).on("focus", function () {
		var t = $(this).scrollTop();
		t >= 600 && $(".floating-box").fadeIn()
	}), $(window).on("blur", function () {
		$(".floating-box").fadeOut()
	})
}

function createQrcode() {
	var t = window.location.href;
	return 0 == $("#runTel").children("img").length && $("#runTel").qrcode({
		render: document.createElement("canvas").getContext ? "canvas" : "table",
		width: 100,
		height: 100,
		correctLevel: 0,
		text: t + "?run=tel"
	}), 0 == $("#wx_erweima").length ? !1 : void $("#wx_erweima").qrcode({
		render: document.createElement("canvas").getContext ? "canvas" : "table",
		width: 150,
		height: 150,
		correctLevel: 0,
		text: t + "?run=tel"
	})
}

function topHidden() {
	this.flag = !0, this.init()
}

function headerAnimate() {
	$(".nav-item-link").hover(function () {
		$(this).children(".nav-item-child").fadeIn(250).animate({
			padding: "10 8px"
		})
	}, function () {
		$(this).children(".nav-item-child").animate({
			padding: "0 8px"
		}, 0).hide()
	})
}

function search_prompt(t) {
	this.ctn = t.ctn, this.btn = t.btn, this.flag = !0, this.href = t.href, this.remonShow = !1, this.init()
}

function openLink(t) {
	$(".open-link").on("click", function () {
		window.open(t, "newwindow", "toolbar=no,scrollbars=yes,resizable=no,top=50%,left=50%,width=800,height=600")
	})
}
topHidden.prototype.init = function () {
	for (var t = this, e = $(".base-common .more"), n = 0; n < e.length; n++) {
		var i = $(e[n]).siblings(".options-base"),
			o = i.css("max-height").replace("px", ""),
			a = i.children().css("height").replace("px", "");
		parseInt(a) > parseInt(o) && $(e[n]).show()
	}
	$(".base-common .more").on("click", function () {
		if (!t.flag) return !1;
		t.flag = !1;
		var e, n = $(this).siblings(".limited-height");
		n.data("max") ? e = n.data("max") : (e = n.css("max-height").replace("px", ""), n.attr("data-max", e));
		var i = n.children(),
			o = n.css("max-height").replace("px", ""),
			a = i.data("height") || i.css("height").replace("px", "");
		i.data("height") || i.attr("data-height", a), o == e ? (n.animate({
			"max-height": a + "px"
		}), $(this).addClass("select-arrow-active").find(".more-text").text("收起选项")) : (n.animate({
			"max-height": e + "px"
		}), $(this).removeClass("select-arrow-active").find(".more-text").text("更多选项")), setTimeout(function () {
			t.flag = !0
		}, 500)
	})
}, search_prompt.prototype.init = function () {
	var t = this,
		e = $(".search-prompt").length,
		n = '<div class="search-prompt">请输入搜索关键字</div>',
		i = $(this.ctn).siblings(".recommend-house");
	i.length > 0 && (this.remonShow = !0), 1 > e && $("body").append(n), $(this.ctn).on("focus", function () {
		return t.remonShow ? void $(this).siblings(".recommend-house").fadeIn() : !1
	}), $(this.ctn).on("blur", function () {
		return t.remonShow ? void $(this).siblings(".recommend-house").fadeOut() : !1
	}), $(this.btn).on("click", function () {
		var e = $(this).siblings(t.ctn),
			n = e.val();
		return "" == n || "楼盘名/地名/开发商名" == n || "楼盘名 / 地名 / 开发商名" == n ? (t.prompt_show(), e.focus(), !1) : void(window.location.href = t.href + n)
	}), $(this.ctn).on("keydown", function () {
		var e = document.all ? window.event : arguments[0] ? arguments[0] : event,
			n = e.charCode || e.keyCode;
		if (13 == n) {
			var i = $(this),
				o = i.val();
			if ("" == o || "楼盘名 / 地名 / 开发商名" == o) return t.prompt_show(), i.focus(), !1;
			window.location.href = t.href + o
		}
	})
}, search_prompt.prototype.prompt_show = function () {
	var t = this;
	return this.flag ? (this.flag = !1, $(".search-prompt").animate({
		top: "100px"
	}), void setTimeout(function () {
		$(".search-prompt").animate({
			top: "-200px"
		}), t.flag = !0
	}, 1500)) : !1
};
