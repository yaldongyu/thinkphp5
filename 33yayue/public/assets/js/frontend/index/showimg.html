<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
 

<head>
  <title>图片详情</title>
  <meta http-equiv="Expires" CONTENT="0">
  <meta http-equiv="Cache-Control" CONTENT="no-cache">
  <meta http-equiv="Pragma" CONTENT="no-cache">
  <script src="jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="viewer.min.js"></script>
    <link rel="stylesheet" href="viewer.min.css">
</head>
<script language="javascript">

  setTimeout(function() {
     $("#fs-prev").css("z-index","92");   
     $("#fs-next").css("z-index","96");
      $("#fs-close").css("z-index","96"); 
  },100); 
 
 
    function GetRequest() {
        var url = location.search; //获取url中"?"符后的字串  
        var theRequest = new Object();
        if (url.indexOf("?") != -1) {
            var str = url.substr(1);
            strs = str.split("&");
            for (var i = 0; i < strs.length; i++) {
                theRequest[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
            }
        }
        return theRequest;
    }  
    
    function abc(argument) {
      var url=GetRequest().imgurl;
      var prev="",next="";
      var a=opener.$("#xcdata").text(); 
      a=eval(a);
      a.forEach(function(v,i,e){
        if(a[i].KP_PicUrl==url ){
          if(i-1<0){prev=a[a.length-1].KP_PicUrl}else{prev=a[i-1].KP_PicUrl}
          if(i+1>a.length-1){next=a[0].KP_PicUrl}else{next=a[i+1].KP_PicUrl}
          ;}
      });
      console.log(prev);console.log(next);
    }
    
    function showprev(){
      var url=GetRequest().imgurl;
      var prev="",next="";
      var a=opener.$("#xcdata").text(); 
      a=eval(a);
      a.forEach(function(v,i,e){
        if(a[i].KP_PicUrl==url ){
          if(i-1<0){prev=a[a.length-1].KP_PicUrl}else{prev=a[i-1].KP_PicUrl}
          if(i+1>a.length-1){next=a[0].KP_PicUrl}else{next=a[i+1].KP_PicUrl}
          ;}
      });
      location.href="showimg.html?imgurl=" + prev ;
      console.log(prev);console.log(next);
    } 
    function shownext(){
      var url=GetRequest().imgurl;
      var prev="",next="";
      var a=opener.$("#xcdata").text(); 
      a=eval(a);
      a.forEach(function(v,i,e){
        if(a[i].KP_PicUrl==url ){
          if(i-1<0){prev=a[a.length-1].KP_PicUrl}else{prev=a[i-1].KP_PicUrl}
          if(i+1>a.length-1){next=a[0].KP_PicUrl}else{next=a[i+1].KP_PicUrl}
          ;}
      });
      location.href="showimg.html?imgurl=" + next ;
      console.log(prev);console.log(next);
    }
    
    
</script>
<style type="text/css">

 
/*===全屏阅览===*/
#fullPicBox .ui{  position:absolute;font-family:sans-serif;z-index:10; font-size:2em;}
#fullPicBox{     overflow:hidden;}
.slide{ max-width:100%; max-height:100%;}
#fs-loader,#fs-prev,#fs-next,#fs-close{background-color:black;color:white;font-weight:bold;cursor:pointer;line-height:1em;}
#fs-close{top:1em;right:1em;padding:35px !important;font-size:32px !important;background-color:rgba(0,0,0,0.5);}
#fs-prev{left:1em;}#fs-next{right:1em;}
#fs-prev:hover,#fs-next:hover,#fs-close:hover{color:#000;background-color: rgba(255,255,255,0.3);}
#fs-loader{top:50%;left:50%;height:1em;margin-top:-1em;margin-left:-75px;display:none;}
#fs-caption{bottom:30px;text-align:center;width:100%;left:0;line-height:1em;display:none; font-size:22px !important;}
#fs-caption span{ padding:5px 15px;background-color:#FFF; font-size:22px; font-family:'Microsoft YaHei',Arial, sans-serif;-moz-border-radius:4px;-webkit-border-radius:4px;-o-border-radius:4px;-ms-border-radius:4px;-khtml-border-radius:4px;border-radius:4px; }
#fs-loader,#fs-prev,#fs-next,#fs-close{padding:10px;-moz-border-radius:4px;-webkit-border-radius:4px;-o-border-radius:4px;-ms-border-radius:4px;-khtml-border-radius:4px;border-radius:4px; }
#fs-prev,#fs-next{z-index: 92; position: absolute;padding:60px 35px;top:50%;margin-top:-55px; font-size:30px !important;}
#fs-prev .icon11{clear:both;position:absolute;left:20px;top:50%;margin-top:-20px;width:26px;height:40px;background:url(/assets/img/index/Prev.png) no-repeat center center;}
#fs-next .icon12{clear:both;position:absolute;left:23px;top:50%;margin-top:-20px;width:26px;height:40px;background:url(/assets/img/index/Next.png) no-repeat center center;}
#fs-close .icon13{clear:both;position:absolute;left:23px;top:60%;margin-top:-20px;width:26px;height:26px;background:url(/assets/img/index/Close.png) no-repeat center center;} 
</style>
<body bgcolor="black" class="viewer-open" style="padding-right: 0px;">
  
<div id="fullPicBox" style="position: absolute; top: 0px; left: 0px; width: 100%; text-align: center; background-color: rgb(0, 0, 0); height: 843px;">
  <div class="ui" id="fs-close" onclick="window.close();"><ins class="icon13"></ins></div>
   
  <div class="ui" id="fs-prev" onclick="showprev();"><ins class="icon11"></ins></div>
  <div class="ui" id="fs-next" onclick="shownext();"><ins class="icon12"></ins></div>
  <div class="ui" id="fs-caption" style="display: block;"><span>样板间</span></div>
  <img class="slide" src="" style="position: absolute; left: 50%; top: 50%; height: auto; width: auto; margin-left: -340px; margin-top: -208px;">
</div>
  
</body>

</html> 
<script>
     var image = new Image();
      var dir = GetRequest();
        image.src = dir['imgurl'];

        var viewer = new Viewer(image, {
            navbar:0,
            button:false,
            zIndex:90,
            title:0,
            toolbar:0,
            zoomRatio:0.3,
          hidden: function () {
            viewer.destroy();
          },
        });

        // image.click();
        viewer.show();
 
</script>